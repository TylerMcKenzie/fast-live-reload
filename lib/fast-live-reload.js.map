{"version":3,"sources":["../src/node/shell-prefix.js","../src/node/requires.js","../src/watcher.js","../src/static-server.js","../src/change-server.js","../src/iframe-server.js","../src/server-main.js"],"names":[],"mappings":"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","file":"fast-live-reload.js","sourcesContent":["#!/usr/bin/env node\n\n","var createClass = require(\"superb-class\").createClass,\n    express = require(\"express\"),\n    nomnom = require(\"nomnom\"),\n    chalk = require(\"chalk\"),\n    expressHandlebars = require(\"express-handlebars\"),\n    expressProxy = require(\"express-http-proxy\"),\n    expressCookieParser = require(\"cookie-parser\");\n\n/**\n * createWatch - Creates a new watch object.\n * @return {object}\n */\nfunction createWatch() {\n    return require(\"watch\");\n}\n\n","/**\n * Monitors a folder, and notifies the registered subscribers whenever\n * files change, with an aggregate object of changes.\n */\nvar Watcher = createClass({\n    /**\n     * @type {Array<Function>}\n     */\n    _listeners : null,\n\n    /**\n     * @type {Array<string>}\n     */\n    _paths : null,\n\n    /**\n     * @type {Function}\n     */\n    _createWatch : null,\n\n    /**\n     * @type {Array<FileMonitor>}\n     */\n    _fileMonitors : null,\n\n    // Use a timeout to record several changes that happen quickly in only\n    // one object. The current changes keeps the changes that need to be\n    // fired.\n    _notificationTimeout : null,\n    _currentChanges : null,\n\n    /**\n     * @type {number} At how many millis to poll the paths.\n     */\n    _pollInterval : null,\n\n    /**\n     * @param {number} pollInterval Time to poll the paths.\n     * @param {Array<string>} paths Monitors the given paths.\n     */\n    constructor : function(pollInterval, paths) {\n        if (!paths || (typeof paths.length == \"undefined\")) {\n            throw new Error('Watcher must have a paths array to monitor.');\n        }\n\n        this._createWatch = createWatch;\n\n        this._listeners = [];\n        this._fileMonitors = [];\n\n        this._paths = paths;\n        this._pollInterval = pollInterval;\n    },\n\n    /**\n     * Adds a listener that will  be notified when paths\n     * are changed.\n     */\n    addListener : function(callback) {\n        this._listeners.push(callback);\n    },\n\n    /**\n     * Start monitoring the given folder.\n     */\n    monitor : function() {\n        var path,\n            pathsString;\n\n        pathsString = this._paths.map(function(it) {\n            return \"'\" + chalk.cyan(it) + \"'\";\n        }).join(\", \");\n\n        console.log(\"Monitoring paths: \" + pathsString +\n                        \" every \" + chalk.cyan(this._pollInterval) + \" millis.\");\n\n        for (var i = 0; i < this._paths.length; i++) {\n            path = this._paths[i];\n\n            this._createWatch().createMonitor(\n                    path,\n                    { interval : this._pollInterval },\n                    this._createMonitor.bind(this, path)\n            );\n        }\n    },\n\n    /**\n     * Creates the file monitor.\n     * @param {string} path The that the created monitor watches.\n     * @param {Object} monitor The monitor object created.\n     */\n    _createMonitor : function(path, monitor) {\n        this._fileMonitors.push(monitor);\n\n        monitor.on(\"created\", this._notify.bind(this, path, \"created\"));\n        monitor.on(\"changed\", this._notify.bind(this, path, \"changed\"));\n        monitor.on(\"removed\", this._notify.bind(this, path, \"removed\"));\n    },\n\n    /**\n     * Start recording the changed paths.\n     * @param {string} path The path where the change occured.\n     * @param {string} event The event name of what happened (created/changed/removed)\n     * @param {string} f The file name where the event occured.\n     */\n    _notify : function(path, event, f) {\n        if (!this._notificationTimeout) {\n            this._notificationTimeout = setTimeout(this._fireChangedFiles.bind(this), 50);\n            this._currentChanges = {\n                eventCount : 0,\n                \"created\" : {},\n                \"changed\" : {},\n                \"removed\" : {}\n            }\n        }\n\n        this._currentChanges[event][f] = this._currentChanges.eventCount++;\n    },\n\n    /**\n     * Notify the listeners of all the changed events.\n     */\n    _fireChangedFiles : function() {\n        this._listeners.forEach(function(listener) {\n            listener.call(null, this._currentChanges);\n        }.bind(this));\n\n        this._notificationTimeout = null;\n        this._currentChanges = null;\n    }\n});\n\n","/**\n * Create a static resource server.\n */\nvar StaticServer = createClass({\n    /**\n     * StaticServer - A static server that simply serves resources.\n     * @param {number} port\n     * @param {string} servedPath\n     * @return {void}\n     */\n    constructor : function(port, servedPath) {\n        this._port = port;\n        this._servedPath = servedPath;\n\n        this._express = express();\n        this._express.use(express.static( servedPath ));\n    },\n\n    /**\n     * Starts listening.\n     */\n    run : function() {\n        console.log(\"Serving \" + chalk.cyan( this._servedPath ) +\n                 \" on port \" + chalk.cyan(this._port));\n        this._express.listen(this._port);\n    }\n});\n\n","/**\n * The server keeps all the received connections,\n * in a pending state,  and notifies all the users when a\n * change happened, with the changed data.\n */\nvar ChangeServer = createClass({\n    _express : null,\n\n    _connectedClients : null,\n\n    /**\n     * @type {number}\n     */\n    _port : null,\n\n    /**\n     * Constructs the server that will listen on the given port.\n     * Defaults to 9001 if not present.\n     * @param {number?} port The port to listen to.\n     */\n    constructor : function(port) {\n        this._port = port;\n\n        this._express = express();\n        this._express.get(\"/\", this._storeRequest.bind(this));\n\n        this._connectedClients = [];\n    },\n\n    /**\n     * Whenever a new request arrived, keep it in the list of\n     * things that we should respond to when resources change.\n     */\n    _storeRequest : function(req, res) {\n        this._connectedClients.push({\n            request: req,\n            response: res\n        });\n    },\n\n    /**\n     * Starts listening.\n     */\n    run : function() {\n        console.log(\"Changes are served on port: \" + chalk.cyan(this._port));\n        this._express.listen(this._port);\n    },\n\n    /**\n     * Callback method where the server is notified that monitored\n     * files have changed.\n     */\n    filesChanged : function(changes) {\n        for (var i = 0; i < this._connectedClients.length; i++) {\n            var response = this._connectedClients[i].response,\n                request = this._connectedClients[i].request;\n\n            // if we know the origin, we allow it, otherwise default to any\n            if (request.header.origin) {\n                response.set('Access-Control-Allow-Origin', request.headers.origin);\n            } else {\n                response.set('Access-Control-Allow-Origin', '*');\n            }\n\n            response.send(JSON.stringify(changes));\n        }\n\n        this._connectedClients = [];\n    }\n});\n\n","/**\n * Create a server that serves the iframe page,\n * in a handlebars template, to provide the URL\n * to redirect to automatically, and proxies the\n * content of the original page.\n */\nvar IFrameServer = createClass({\n    /**\n     * Constructs a handlebars server that serves the given path.\n     */\n    constructor : function(port, servedPath, serveUrl) {\n        this._port = port;\n        this._servedPath = servedPath;\n        this._serveUrl = serveUrl;\n\n        var app = this._app = express();\n\n        app.set('views', __dirname + '/../iframe/fast-live-reload/');\n\n        var hbs = expressHandlebars.create();\n\n        app.engine('handlebars', hbs.engine);\n        app.set('view engine', 'handlebars');\n\n        app.use(expressCookieParser());\n        app.use(express.static( __dirname + '/../iframe' ));\n    },\n\n    /**\n     * Runs the actual server.\n     */\n    run : function() {\n        console.log(\"Serving IFrame reloader for \" + chalk.cyan( this._serveUrl ) +\n                 \" on port \" + chalk.cyan(this._port));\n\n        // find only the host part for proxying\n        var m = /^(.*?\\:\\/\\/[^/]+)(\\/?.*)$/.exec( this._serveUrl );\n\n        if (!m) {\n            throw new Error(\"Invalid URL: \" + this._serveUrl);\n        }\n\n        var proxyHost = m[ 1 ],\n            requestPath = m[ 2 ];\n\n        console.log(\"Proxying host: \" + chalk.cyan(proxyHost));\n\n        /**\n         * Load the proxy.\n         */\n        this._app.use('/', expressProxy(proxyHost, {\n            filter : function(req, res) {\n                // if fast live reload already loaded, there's no need to do anything.\n                if (req.cookies.fastLiveReload && !/^\\/fast-live-reload\\//.test(req.path)) {\n                    return true;\n                }\n\n                return false;\n            },\n\n            intercept : function(data, req, res, callback) {\n                // allow in frame embedding.\n                res.set('Access-Control-Allow-Origin', '*');\n                res.set('X-Frame-Options', 'ALLOW-FROM *');\n\n                callback(null, data);\n            }\n        }));\n\n        /**\n         * Redirect on the first reload.\n         */\n        this._app.use('/', function(req, res, next) {\n            if (req.path == '/fast-live-reload/' || req.cookies.fastLiveReload) {\n                if (!req.cookies.fastLiveReload) { // called directly /fast-live-reload/\n                    res.cookie('fastLiveReload', 'true');\n                }\n                return next();\n            }\n\n            res.cookie('fastLiveReload', 'true');\n            res.redirect('/fast-live-reload/');\n        }.bind(this));\n\n        /**\n         * Serve the fast-live-reload page.\n         */\n        this._app.get('/fast-live-reload/', function(req, res, next) {\n            res.render('index', {\n                TARGET_URL : requestPath\n            });\n        }.bind(this));\n\n        this._app.listen(this._port);\n    }\n});\n\n","\nvar opts = nomnom.script(\"fast-live-reload\")\n        .help(\"Monitors multiple folders for changes, and notifies connected clients.\")\n        .option(\"interval\", {\n            help: \"Poll every how many milliseconds.\",\n            transform: function(millis) {\n                return parseInt(millis) || 100;\n            },\n            default : 100\n        })\n        .option(\"port\", {\n            abbr: \"p\",\n            help: \"Port to listen to.\",\n            transform: function(port) {\n                return parseInt(port) || 9001;\n            },\n            default : 9001\n        })\n        .option(\"serve\", {\n            abbr: \"s\",\n            help: \"Folder or site (via IFrame) to serve.\"\n        })\n        .option(\"serve-port\", {\n            abbr: \"sp\",\n            help: \"Port to serve files to.\",\n            transform: function(port) {\n                return parseInt(port) || 9000;\n            },\n            default: 9000\n        })\n        .option(\"no-serve\", {\n            abbr: \"n\",\n            help: \"Don't serve any local folder or site.\",\n            flag: true\n        })\n        .option(\"paths\", {\n            list: true,\n            help: \"Paths to monitor for changes. Defaults to the serve folder if used.\",\n        })\n        .parse();\n\n// in case no paths are given for monitoring, monitor the current folder.\n\nvar monitoredPaths = ['.'];\n\nif (opts.serve) {\n    monitoredPaths = [ opts.serve ];\n}\n\nif (! opts['no-serve']) {\n    var serveUri = monitoredPaths[0];\n\n    if (/^\\w+\\:\\/\\//.test(serveUri)) { // is a remote URI.\n        // restore the monitored paths, since the watcher can't process em\n        monitoredPaths = ['.'];\n        new IFrameServer(opts['serve-port'], 'iframe', serveUri).run();\n    } else {\n        new StaticServer(opts['serve-port'], monitoredPaths[0]).run();\n    }\n}\n\nmonitoredPaths = opts._.length ? opts._ : monitoredPaths;\n\nvar changeServer = new ChangeServer(opts.port);\nvar watcher = new Watcher(opts.interval, monitoredPaths);\n\nwatcher.addListener( changeServer.filesChanged.bind(changeServer) );\nchangeServer.run();\nwatcher.monitor();\n\n"]}