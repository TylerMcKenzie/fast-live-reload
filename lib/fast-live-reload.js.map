{"version":3,"sources":["../src/node/shell-prefix.js","../src/node/requires.js","../src/watcher.js","../src/change-server.js","../src/iframe-server.js","../src/execute-server.js","../src/server-main.js"],"names":[],"mappings":"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","file":"fast-live-reload.js","sourcesContent":["#!/usr/bin/env node\n\n","var createClass = require(\"superb-class\").createClass,\n    express = require(\"express\"),\n    nomnom = require(\"nomnom\"),\n    chalk = require(\"chalk\"),\n    expressHandlebars = require(\"express-handlebars\"),\n    expressProxy = require(\"express-http-proxy\"),\n    expressCookieParser = require(\"cookie-parser\"),\n    exec = require(\"shelljs\").exec,\n    handlebars = require(\"handlebars\"),\n    fs = require(\"fs\");\n\n/**\n * createWatch - Creates a new watch object.\n * @return {object}\n */\nfunction createWatch() {\n    return require(\"watch\");\n}\n\n","/**\n * Monitors a folder, and notifies the registered subscribers whenever\n * files change, with an aggregate object of changes.\n * @type {Watcher}\n */\nvar Watcher = createClass({\n    /**\n     * @type {Array<Function>}\n     */\n    _listeners : null,\n\n    /**\n     * @type {Array<string>}\n     */\n    _paths : null,\n\n    /**\n     * @type {Function}\n     */\n    _createWatch : null,\n\n    /**\n     * @type {Array<FileMonitor>}\n     */\n    _fileMonitors : null,\n\n    // Use a timeout to record several changes that happen quickly in only\n    // one object. The current changes keeps the changes that need to be\n    // fired.\n    _notificationTimeout : null,\n    _currentChanges : null,\n\n    /**\n     * @type {number} At how many millis to poll the paths.\n     */\n    _pollInterval : null,\n\n    /**\n     * @param {number} pollInterval Time to poll the paths.\n     * @param {number} delay Time to wait before triggering changes.\n     * @param {Array<string>} paths Monitors the given paths.\n     */\n    constructor : function(pollInterval, delay, paths) {\n        if (!paths || (typeof paths.length == \"undefined\")) {\n            throw new Error('Watcher must have a paths array to monitor.');\n        }\n\n        this._createWatch = createWatch;\n        this._delay = delay;\n\n        this._listeners = [];\n        this._fileMonitors = [];\n\n        this._paths = paths;\n        this._pollInterval = pollInterval;\n    },\n\n    /**\n     * Adds a listener that will  be notified when paths\n     * are changed.\n     */\n    addListener : function(callback) {\n        this._listeners.push(callback);\n    },\n\n    /**\n     * Start monitoring the given folder.\n     */\n    monitor : function() {\n        var path,\n            pathsString;\n\n        pathsString = this._paths.map(function(it) {\n            return \"'\" + chalk.cyan(it) + \"'\";\n        }).join(\", \");\n\n        console.log(\"Monitoring paths: \" + pathsString +\n                        \" every \" + chalk.cyan(this._pollInterval) + \" millis.\");\n\n        for (var i = 0; i < this._paths.length; i++) {\n            path = this._paths[i];\n\n            this._createWatch().createMonitor(\n                    path,\n                    { interval : this._pollInterval },\n                    this._createMonitor.bind(this, path)\n            );\n        }\n    },\n\n    /**\n     * Creates the file monitor.\n     * @param {string} path The that the created monitor watches.\n     * @param {Object} monitor The monitor object created.\n     */\n    _createMonitor : function(path, monitor) {\n        this._fileMonitors.push(monitor);\n\n        monitor.on(\"created\", this._notify.bind(this, path, \"created\"));\n        monitor.on(\"changed\", this._notify.bind(this, path, \"changed\"));\n        monitor.on(\"removed\", this._notify.bind(this, path, \"removed\"));\n    },\n\n    /**\n     * Start recording the changed paths.\n     * @param {string} path The path where the change occured.\n     * @param {string} event The event name of what happened (created/changed/removed)\n     * @param {string} f The file name where the event occured.\n     */\n    _notify : function(path, event, f) {\n        if (!this._notificationTimeout) {\n            var delay = this._delay >= 0 ? this._delay : 0;\n\n            this._notificationTimeout = setTimeout(this._fireChangedFiles.bind(this), delay);\n            this._currentChanges = {\n                eventCount : 0,\n                \"created\" : {},\n                \"changed\" : {},\n                \"removed\" : {}\n            }\n        }\n\n        this._currentChanges[event][f] = this._currentChanges.eventCount++;\n    },\n\n    /**\n     * Notify the listeners of all the changed events.\n     */\n    _fireChangedFiles : function() {\n        this._listeners.forEach(function(listener) {\n            listener.call(null, this._currentChanges);\n        }.bind(this));\n\n        this._notificationTimeout = null;\n        this._currentChanges = null;\n    }\n});\n\n","/**\n * The server keeps all the received connections,\n * in a pending state,  and notifies all the users when a\n * change happened, with the changed data.\n */\nvar ChangeServer = createClass({\n    _express : null,\n\n    _connectedClients : null,\n\n    /**\n     * @type {number}\n     */\n    _port : null,\n\n    /**\n     * Constructs the server that will listen on the given port.\n     * Defaults to 9001 if not present.\n     * @param {number?} port The port to listen to.\n     */\n    constructor : function(port) {\n        this._port = port;\n\n        this._express = express();\n        this._express.get(\"/\", this._storeRequest.bind(this));\n\n        this._connectedClients = [];\n    },\n\n    /**\n     * Whenever a new request arrived, keep it in the list of\n     * things that we should respond to when resources change.\n     */\n    _storeRequest : function(req, res) {\n        this._connectedClients.push({\n            request: req,\n            response: res\n        });\n    },\n\n    /**\n     * Starts listening.\n     */\n    run : function() {\n        console.log(\"Changes are served on port: \" + chalk.cyan(this._port));\n        this._express.listen(this._port);\n    },\n\n    /**\n     * Callback method where the server is notified that monitored\n     * files have changed.\n     */\n    filesChanged : function(changes) {\n        for (var i = 0; i < this._connectedClients.length; i++) {\n            var response = this._connectedClients[i].response,\n                request = this._connectedClients[i].request;\n\n            // if we know the origin, we allow it, otherwise default to any\n            if (request.header.origin) {\n                response.set('Access-Control-Allow-Origin', request.headers.origin);\n            } else {\n                response.set('Access-Control-Allow-Origin', '*');\n            }\n\n            response.send(JSON.stringify(changes));\n        }\n\n        this._connectedClients = [];\n    }\n});\n\n","/**\n * Create a server that serves the iframe page,\n * in a handlebars template, to provide the URL\n * to redirect to automatically, and proxies the\n * content of the original page. In case the URI\n * is a file, it just serves the file.\n */\nvar IFrameServer = createClass({\n    /**\n     * Constructs a handlebars server that serves the given path.\n     */\n    constructor : function(port, serveUri) {\n        this._port = port;\n        this._serveUrl = serveUri;\n\n        var app = this._app = express();\n\n        app.set('views', __dirname + '/../iframe/fast-live-reload/');\n\n        var hbs = expressHandlebars.create();\n\n        app.engine('handlebars', hbs.engine);\n        app.set('view engine', 'handlebars');\n\n        app.use(expressCookieParser());\n        app.use(express.static( __dirname + '/../iframe' ));\n    },\n\n    /**\n     * Runs the actual server.\n     */\n    run : function() {\n        console.log(\"Proxy: \" + chalk.cyan(\"http://localhost:\" + this._port + \"/\") + \"\\n\" +\n                    \"for: \" + chalk.cyan( this._serveUrl ) );\n\n        // find only the host part for proxying\n        var m = /^(.*?\\:\\/\\/[^/]+)(\\/?.*)$/.exec( this._serveUrl );\n\n        if (!m) {\n            this._serveFileUri();\n        } else {\n            var proxyHost = m[ 1 ],\n                requestPath = m[ 2 ];\n\n            this._serveProxyUri(proxyHost, requestPath);\n        }\n\n        /**\n         * Redirect on the first reload.\n         */\n        this._app.use('/', function(req, res, next) {\n            if (req.path == '/fast-live-reload/' || req.cookies.fastLiveReload) {\n                if (!req.cookies.fastLiveReload) { // called directly /fast-live-reload/\n                    res.cookie('fastLiveReload', 'true');\n                }\n                return next();\n            }\n\n            res.cookie('fastLiveReload', 'true');\n        \tres.redirect('/fast-live-reload/');\n        }.bind(this));\n\n        /**\n         * Serve the fast-live-reload page.\n         */\n        this._app.get('/fast-live-reload/', function(req, res, next) {\n        \tres.render('index', {\n                TARGET_URL : requestPath\n            });\n        }.bind(this));\n\n        this._app.listen(this._port);\n    },\n\n    /**\n     * _serveProxyUri - Serves the content using a PROXY.\n     * @param {string} proxyHost\n     * @param {string} requestPath\n     * @return {void}\n     */\n    _serveProxyUri : function(proxyHost, requestPath) {\n        /**\n         * Load the proxy.\n         */\n        this._app.use('/', expressProxy(proxyHost, {\n            filter : function(req, res) {\n                // if fast live reload already loaded, there's no need to do anything.\n                if (req.cookies.fastLiveReload && !/^\\/fast-live-reload\\//.test(req.path)) {\n                    return true;\n                }\n\n                return false;\n            },\n\n            intercept : function(data, req, res, callback) {\n                // allow in frame embedding.\n                res.set('Access-Control-Allow-Origin', '*');\n                res.set('X-Frame-Options', '');\n\n                callback(null, data);\n            }\n        }));\n    },\n\n    /**\n     * _serveFileUri - Serves local files content.\n     * @return {void}\n     */\n    _serveFileUri : function() {\n        this._app.use(express.static( this._serveUrl ));\n    }\n});\n\n","/**\n * ExecuteCommandsServer - An executor that will run the given\n *                         commands before notifying the change\n *                         server of the changes.\n * @type {ExecuteCommandsServer}\n */\nvar ExecuteCommandsServer = createClass(\"ExecuteCommandsServer\", {\n\t_commands : null,\n\t_changeServer : null,\n\n    /**\n     * constructor\n     * @param {Array<string>} commands\n\t * @param {ChangeServer} changeServer\n\t */\n    constructor: function(commands, changeServer) {\n        this._commands = commands;\n        this._changeServer = changeServer;\n\n        console.log(\"On change run the following commands: \");\n        this._commands.forEach(function(command, it) {\n            console.log( chalk.cyan(it + 1 + \".\") + \" \" + chalk.green(command) );\n        });\n    },\n\n    /**\n     * filesChanged - Executes the registered commands and then forwards the\n     *                change to the change server.\n     * @param {} changes\n     * @return {void}\n     */\n    filesChanged : function(changes) {\n        console.log(chalk.green(\"\\nChanges occurred\"));\n\n        this._commands.forEach(function(command) {\n            console.log(\"\\nRunning: \" + chalk.green(command));\n\n            if (exec(command).code != 0) {\n                console.log(chalk.yellow(\"Command failed: \" + command));\n            }\n        });\n\n        this._changeServer.filesChanged(changes);\n    }\n});\n","\n/**\n * isLocalServe - Checks if the given pathOrUrl is a remote URL or not.\n * @param {string} pathOrUrl\n * @return {boolean}\n */\nfunction isLocalServe(pathOrUrl) {\n    // find only the host part for proxying\n    var m = /^(.*?\\:\\/\\/[^/]+)(\\/?.*)$/.exec( pathOrUrl );\n\n    return !m;\n}\n\n/**\n * Shows the help for the application.\n */\nfunction showHelp() {\n    var helpText;\n\n    helpText = fs.readFileSync(\"lib/readme.hbs\", {\n        encoding: 'utf-8'\n    });\n\n    var context;\n\n    if (chalk.supportsColor) {\n        context = {\n            GRAY: chalk.styles.gray.open,\n            RESET: chalk.styles.reset.open,\n            BLUE: chalk.styles.cyan.open,\n            GREEN: chalk.styles.green.open,\n            BOLD: chalk.styles.bold.open\n        };\n    } else {\n        context = {};\n    }\n\n    context.BINARY = \"binary\";\n\n    console.log(handlebars.compile(helpText)(context));\n    process.exit();\n}\n\nshowHelp();\n\n//\n// Parse the input options.\n//\nvar opts = nomnom.script(\"fast-live-reload\")\n        .help(\"The swiss army knife of live reloading.\\n\\nMonitors multiple folders for changes, notifies connected clients, executes programs, serves local content, proxies sites, iframe reloads existing pages...\\n\")\n        .option(\"interval\", {\n            help: \"Poll every how many milliseconds.\",\n            transform: function(millis) {\n                return parseInt(millis) || 100;\n            },\n            default : 100\n        })\n        .option(\"delay\", {\n            abbr: \"d\",\n            help: \"Time to wait in milliseconds before triggering changes.\",\n            transform: function(millis) {\n                millis = parseInt(millis);\n\n                if (\"\" + millis == \"NaN\") {\n                    return -1;\n                }\n                return millis;\n            },\n            default : -1\n        })\n        .option(\"port\", {\n            abbr: \"p\",\n            help: \"Port to listen to.\",\n            transform: function(port) {\n                return parseInt(port) || 9001;\n            },\n            default : 9001\n        })\n        .option(\"serve\", {\n            abbr: \"s\",\n            help: \"Folder or site (via IFrame) to serve.\"\n        })\n        .option(\"serve-port\", {\n            abbr: \"sp\",\n            help: \"Port to serve files to.\",\n            transform: function(port) {\n                return parseInt(port) || 9000;\n            },\n            default: 9000\n        })\n        .option(\"no-serve\", {\n            abbr: \"n\",\n            help: \"Don't serve any local folder or site.\",\n            flag: true\n        })\n        .option(\"execute\", {\n            abbr: \"e\",\n            help: \"Execute the given commands on change. Only after the commands runs, will the clients be notified of the changes.\",\n            list: true\n        })\n        .option(\"add-path\", {\n            list: true,\n            help: \"Paths to monitor for changes. Defaults to the serve folder if not present.\",\n        })\n        .parse();\n\n// in case no paths are given for monitoring, monitor the current folder.\n\nvar monitoredPaths = ['.'],\n    serveUri;\n\nserveUri = opts.serve;\n\nif (!serveUri) { // there is no `-s` set\n    serveUri = monitoredPaths[0]; // monitor ./\n}\n\n// if there was a `-s` specified with a local path, monitor that by default.\nif (isLocalServe(serveUri)) {\n     monitoredPaths = [ serveUri ];\n}\n\nif (! opts['no-serve']) {\n    new IFrameServer(opts['serve-port'], serveUri).run();\n}\n\nmonitoredPaths = opts._.length ? opts._ : monitoredPaths;\n\n//\n// Add paths for both the items specified with --add-path, and also\n// for the parameters that are not prefixed by anything.\n//\nif (opts['add-path']) {\n    for (var i = 0; i < opts['add-path'].length; i++) {\n        var path = opts['add-path'][i];\n        monitoredPaths.push(path);\n    }\n}\n\n//\n// We need a watcher to monitor the file system folders, and a\n// change server that will notify active browser clients when changes\n// occured.\n//\nvar changeServer = new ChangeServer(opts.port);\nvar watcher = new Watcher(opts.interval, opts.delay, monitoredPaths),\n    watcherCallback;\n\n//\n// In case commands need to be executed, we notify the command executor server\n// of the file changes, and in turn it will notify the change server after the\n// commands are done.\n//\n// The reason is allowing having a build that also changes data, so we don't get\n// too many triggers for reloading of the page.\n//\nif (opts.execute) {\n    var executeCommandsServer = new ExecuteCommandsServer(opts.execute, changeServer);\n    watcherCallback = executeCommandsServer.filesChanged.bind(executeCommandsServer);\n} else {\n    watcherCallback = changeServer.filesChanged.bind(changeServer);\n}\n\nwatcher.addListener( watcherCallback );\n\nchangeServer.run();\nwatcher.monitor();\n\n"]}